/*
 * AllInOne Banner - Banner With Playlist v3.0
 *
 * Copyright 2012, LambertGroup
 * 
*/


(function(e){function H(a,d){e(a.currentImg.attr("data-text-id")).css("display","block");var c=e(a.currentImg.attr("data-text-id")).children(),g=0;currentText_arr=[];c.each(function(){currentText_arr[g]=e(this);var c=currentText_arr[g].attr("data-initial-left"),b=currentText_arr[g].attr("data-initial-top");d.responsive&&(c=parseInt(c/(d.origWidth/d.width),10),b=parseInt(b/(d.origWidth/d.width),10));currentText_arr[g].css({left:c+"px",top:b+"px",opacity:parseInt(currentText_arr[g].attr("data-fade-start"), 10)/100});var l=currentText_arr[g];setTimeout(function(){if(d.responsive){newCss="";if(l.css("font-size").lastIndexOf("px")!=-1){fontSize=l.css("font-size").substr(0,l.css("font-size").lastIndexOf("px"));newCss=newCss+("font-size:"+fontSize/(d.origWidth/d.width)+"px;")}else if(l.css("font-size").lastIndexOf("em")!=-1){fontSize=l.css("font-size").substr(0,l.css("font-size").lastIndexOf("em"));newCss=newCss+("font-size:"+fontSize/(d.origWidth/d.width)+"em;")}if(l.css("line-height").lastIndexOf("px")!= -1){lineHeight=l.css("line-height").substr(0,l.css("line-height").lastIndexOf("px"));newCss=newCss+("line-height:"+lineHeight/(d.origWidth/d.width)+"px;")}else if(l.css("line-height").lastIndexOf("em")!=-1){lineHeight=l.css("line-height").substr(0,l.css("line-height").lastIndexOf("em"));newCss=newCss+("line-height:"+lineHeight/(d.origWidth/d.width)+"em;")}l.wrapInner('<div class="newFS" style="'+newCss+'" />')}var b=l.attr("data-final-left"),c=l.attr("data-final-top");if(d.responsive){b=parseInt(b/ (d.origWidth/d.width),10);c=parseInt(c/(d.origWidth/d.width),10)}var g=1;a.isVideoPlaying==true&&(g=0);l.animate({opacity:g,left:b+"px",top:c+"px"},l.attr("data-duration")*1E3,function(){a.isVideoPlaying==true&&e(a.currentImg.attr("data-text-id")).children().css("opacity",0)})},1E3*currentText_arr[g].attr("data-delay"));g++})}function I(a,d){nowx=(new Date).getTime();!a.mouseOverBanner&&(!a.effectIsRunning&&d.showCircleTimer)&&(a.ctx.clearRect(0,0,a.canvas.width,a.canvas.height),a.ctx.beginPath(), a.ctx.globalAlpha=d.behindCircleAlpha/100,a.ctx.arc(d.circleRadius+2*d.circleLineWidth,d.circleRadius+2*d.circleLineWidth,d.circleRadius,0,2*Math.PI,!1),a.ctx.lineWidth=d.circleLineWidth+2,a.ctx.strokeStyle=d.behindCircleColor,a.ctx.stroke(),a.ctx.beginPath(),a.ctx.globalAlpha=d.circleAlpha/100,a.ctx.arc(d.circleRadius+2*d.circleLineWidth,d.circleRadius+2*d.circleLineWidth,d.circleRadius,0,2*((a.timeElapsed+nowx-a.arcInitialTime)/1E3)/d.autoPlay*Math.PI,!1),a.ctx.lineWidth=d.circleLineWidth,a.ctx.strokeStyle= d.circleColor,a.ctx.stroke())}function J(a,d,c){e(".stripe",a).remove();e(".block",a).remove();A=z=Math.round(a.width()/d.numberOfStripes);for(var g=!0,h=0;h<d.numberOfStripes;h++)h==d.numberOfStripes-1&&(A=a.width()-z*(d.numberOfStripes-1)),!d.responsive||!e.browser.msie||e.browser.msie&&9<=e.browser.version?-1!=s.indexOf("ipad")||-1!=s.indexOf("iphone")||-1!=s.indexOf("ipod")||-1!=s.indexOf("webos")?g=!1:a.append(e('<div class="stripe"></div>').css({opacity:"0",left:z*h+"px",width:A+"px",height:"0px", background:'url("'+c.current_imgInside.attr("src")+'") '+-1*h*z+"px 0%"})):g=!1,g||(mleft=-1*z*h,a.append(e('<div class="stripe"><img src="'+c.current_imgInside.attr("src")+'" width="'+a.width()+'" height="'+a.height()+'" style="margin-left:'+mleft+'px;"></div>').css({opacity:"0",left:z*h+"px",width:A+"px",height:"0px"})));d.responsive&&g&&(!e.browser.msie||e.browser.msie&&9<=e.browser.version)&&e(".stripe",a).css({"-webkit-background-size":a.width()+"px "+a.height()+"px","-moz-background-size":a.width()+ "px "+a.height()+"px","-o-background-size":a.width()+"px "+a.height()+"px","-ms-background-size":a.width()+"px "+a.height()+"px","background-size":a.width()+"px "+a.height()+"px"})}function G(a,d,e,g,h){var b=a.width(),l=a.height();a.css({width:"0"});a.css({height:"0"});d==g.numberOfRows-1&&e==g.numberOfColumns-1?setTimeout(function(){a.animate({opacity:"1.0",width:b,height:l},1E3*g.effectDuration/3,"",function(){h.trigger("effectComplete")})},o):setTimeout(function(){a.animate({opacity:"1.0",width:b, height:l},1E3*g.effectDuration/3)},o);o+=D}function C(a,d,c,g,h,b,l,B,w,r){var t=!0;if(!c.loop&&d.current_img_no+a>=g||!c.loop&&0>d.current_img_no+a)t=!1;if(t){e(".newFS",b).contents().unwrap();d.arcInitialTime=(new Date).getTime();d.timeElapsed=0;c.showCircleTimer&&(d.ctx.clearRect(0,0,d.canvas.width,d.canvas.height),d.ctx.beginPath(),d.ctx.globalAlpha=c.behindCircleAlpha/100,d.ctx.arc(c.circleRadius+2*c.circleLineWidth,c.circleRadius+2*c.circleLineWidth,c.circleRadius,0,2*Math.PI,!1),d.ctx.lineWidth= c.circleLineWidth+2,d.ctx.strokeStyle=c.behindCircleColor,d.ctx.stroke(),d.ctx.beginPath(),d.ctx.globalAlpha=c.circleAlpha/100,d.ctx.arc(c.circleRadius+2*c.circleLineWidth,c.circleRadius+2*c.circleLineWidth,c.circleRadius,0,0,!1),d.ctx.lineWidth=c.circleLineWidth,d.ctx.strokeStyle=c.circleColor,d.ctx.stroke());e(d.currentImg.attr("data-text-id")).css("display","none");e(h[d.current_img_no]).removeClass("thumbsHolder_ThumbON");c.randomizeImages&&!d.bottomNavClicked?(a=Math.floor(Math.random()*g),d.current_img_no= d.current_img_no===a?Math.floor(Math.random()*g):a):d.current_img_no=d.current_img_no+a>=g?0:0>d.current_img_no+a?g-1:d.current_img_no+a;d.bottomNavClicked=!1;e(h[d.current_img_no]).addClass("thumbsHolder_ThumbON");E(0,l,g,B,c,d,w);d.currentImg=e(r[d.current_img_no]);d.current_imgInside=d.currentImg.find("img:first");d.currentImg.attr("data-transition")?(current_effect=d.currentImg.attr("data-transition"),"random"==current_effect&&(current_effect=F[Math.floor(Math.random()*F.length)])):current_effect= "random"!=c.defaultEffect?c.defaultEffect:F[Math.floor(Math.random()*F.length)];d.effectIsRunning=!0;if("fade"==current_effect||"slideFromLeft"==current_effect||"slideFromRight"==current_effect||"slideFromTop"==current_effect||"slideFromBottom"==current_effect)if(J(b,c,d),g=e(".stripe:first",b),"fade"==current_effect&&(g.css({top:"0px",height:"100%",width:b.width()+"px"}),g.animate({opacity:"1.0"},2E3*c.effectDuration,"",function(){b.trigger("effectComplete")})),"slideFromLeft"==current_effect&&(g.css({top:"0px", height:"100%",width:"0"}),g.animate({opacity:"1.0",width:b.width()+"px"},1E3*c.effectDuration,"",function(){b.trigger("effectComplete")})),"slideFromRight"==current_effect&&(g.css({top:"0px",height:"100%",width:"0",left:b.width()+5+"px"}),g.animate({opacity:"1.0",left:"0",width:b.width()+"px"},1E3*c.effectDuration,"",function(){b.trigger("effectComplete")})),"slideFromTop"==current_effect&&(g.css({top:"0px",height:"0",width:b.width()+"px"}),g.animate({opacity:"1.0",height:b.height()+"px"},1E3*c.effectDuration, "",function(){b.trigger("effectComplete")})),"slideFromBottom"==current_effect)g.css({top:"0px",height:"0",width:b.width()+"px",top:b.height()+"px"}),g.animate({opacity:"1.0",top:0,height:b.height()+"px"},1E3*c.effectDuration,"",function(){b.trigger("effectComplete")});0<=current_effect.indexOf("Stripes")&&(J(b,c,d),g=0<=current_effect.indexOf("Reverse")?e(".stripe",b).myReverse():e(".stripe",b),o=100,i=0,g.each(function(){var a=e(this);(current_effect=="topBottomDroppingStripes"||current_effect== "topBottomDroppingReverseStripes")&&a.css({top:"0px"});(current_effect=="bottomTopDroppingStripes"||current_effect=="bottomTopDroppingReverseStripes")&&a.css({bottom:"0px"});(current_effect=="leftRightFadingStripes"||current_effect=="leftRightFadingReverseStripes")&&a.css({top:"0px",height:"100%",width:"0"});current_effect=="asynchronousDroppingStripes"&&(i%2?a.css({top:"0px"}):a.css({bottom:"0px"}));if(current_effect=="leftRightFadingStripes"||current_effect=="leftRightFadingReverseStripes"){var d= z;if(current_effect=="leftRightFadingStripes"&&i==c.numberOfStripes-1||current_effect=="leftRightFadingReverseStripes"&&i==0)d=A;i==c.numberOfStripes-1?setTimeout(function(){a.animate({width:d+"px",opacity:"1.0"},c.effectDuration*800,"",function(){b.trigger("effectComplete")})},o):setTimeout(function(){a.animate({width:d+"px",opacity:"1.0"},c.effectDuration*800)},o)}else i==c.numberOfStripes-1?setTimeout(function(){a.animate({height:"100%",opacity:"1.0"},c.effectDuration*1E3,"",function(){b.trigger("effectComplete")})}, o):setTimeout(function(){a.animate({height:"100%",opacity:"1.0"},c.effectDuration*1E3)},o);o=o+L;i++}));if(0<=current_effect.indexOf("Blocks")){e(".stripe",b).remove();e(".block",b).remove();g=Math.round(b.width()/c.numberOfColumns);h=Math.round(b.height()/c.numberOfRows);l=g;B=h;r=w=0;a=!0;for(t=0;t<c.numberOfRows;t++)for(var p=0;p<c.numberOfColumns;p++)w=g*p,r=h*t,l=p==c.numberOfColumns-1?b.width()-g*(c.numberOfColumns-1):g,B=t==c.numberOfRows-1?b.height()-h*(c.numberOfRows-1):h,!c.responsive|| !e.browser.msie||e.browser.msie&&9<=e.browser.version?-1!=s.indexOf("ipad")||-1!=s.indexOf("iphone")||-1!=s.indexOf("ipod")||-1!=s.indexOf("webos")?a=!1:b.append(e('<div class="block"></div>').css({opacity:"0",left:w+"px",top:r+"px",width:l+"px",height:B+"px",background:'url("'+d.current_imgInside.attr("src")+'") -'+w+"px -"+r+"px"})):a=!1,a||(mleft=-1*w,mtop=-1*r,b.append(e('<div class="block"><img src="'+d.current_imgInside.attr("src")+'" width="'+b.width()+'" height="'+b.height()+'" style="margin-left:'+ mleft+"px; margin-top:"+mtop+'px;"></div>').css({opacity:"0",left:w+"px",top:r+"px",width:l+"px",height:B+"px"})));c.responsive&&a&&(!e.browser.msie||e.browser.msie&&9<=e.browser.version)&&e(".block",b).css({"-webkit-background-size":b.width()+"px "+b.height()+"px","-moz-background-size":b.width()+"px "+b.height()+"px","-o-background-size":b.width()+"px "+b.height()+"px","-ms-background-size":b.width()+"px "+b.height()+"px","background-size":b.width()+"px "+b.height()+"px"});if(0<=current_effect.indexOf("Reverse"))var m= e(".block",b).myReverse();else if("randomBlocks"==current_effect){for(var d=e(".block",b),x,g=d.length;g;m=parseInt(Math.random()*g,10),x=d[--g],d[g]=d[m],d[m]=x);m=d}else m=e(".block",b);o=100;if("randomBlocks"==current_effect){i=0;var v=c.numberOfRows*c.numberOfColumns;m.each(function(){var a=e(this),d=a.width(),f=a.height();a.css({width:"0",height:"0"});i==v-1?setTimeout(function(){a.animate({opacity:"1.0",width:d,height:f},c.effectDuration*1E3/3,"",function(){b.trigger("effectComplete")})},o): setTimeout(function(){a.animate({opacity:"1.0",width:d,height:f},c.effectDuration*1E3/3)},o);o=o+D;i++})}else{var n=0,k=0,f=[];f[n]=[];m.each(function(){f[n][k]=e(this);k++;if(k==c.numberOfColumns){n++;k=0;f[n]=[]}});k=n=0;o=100;m=e(f[n][k]);for(G(m,0,0,c,b);n<c.numberOfRows-1||k<c.numberOfColumns-1;){n<c.numberOfRows-1&&n++;k<c.numberOfColumns-1&&k++;i=n;k<n&&c.numberOfRows>c.numberOfColumns&&(i=n-k);j=0;for(n<k&&c.numberOfRows<c.numberOfColumns&&(j=k-n);0<=i&&j<=k;)m=e(f[i--][j++]),G(m,i,j,c,b)}o= c.numberOfRows<c.numberOfColumns?o-(c.numberOfRows-1)*D:o-(c.numberOfColumns-1)*D;limit_i=0;for(limit_j=k-n;limit_i<n&&limit_j<k;){i=n+1;for(j=limit_j;i>limit_i&&j<k;)i-=1,j+=1,m=e(f[i][j]),G(m,i,j,c,b);limit_i++;limit_j++}}}}}function E(a,d,e,g,h,b,l){e>h.numberOfThumbsPerScreen&&(e=(d.height()+b.thumbMarginTop)*(e-h.numberOfThumbsPerScreen),g.stop(!0,!0),a&&!b.isCarouselScrolling?(b.isCarouselScrolling=!0,1>=a&&(a=0),g.animate({top:parseInt(h.borderWidth/(h.origWidth/h.width)+e*(a-100)/100,10)+ "px"},1100,"easeOutQuad",function(){b.isCarouselScrolling=!1})):b.isCarouselScrolling||(b.isCarouselScrolling=!0,g.css("opacity","0.5"),a=parseInt(h.borderWidth/(h.origWidth/h.width)-(d.height()+b.thumbMarginTop)*b.current_img_no,10),Math.abs(a)>e&&(a=h.borderWidth/(h.origWidth/h.width)-e),l.slider("value",100+parseInt(100*a/e,10)),g.animate({opacity:1,top:a+"px"},500,"easeOutCubic",function(){b.isCarouselScrolling=!1})))}function K(a,d,c,g,h,b,l,s,o,r,t,p){h.css({height:parseInt(d.origThumbH/(d.origWidth/ d.width),10)+"px"});r.css({"padding-left":parseInt(d.origthumbLeftPadding/(d.origWidth/d.width),10)+"px","padding-right":parseInt(d.origthumbRightPadding/(d.origWidth/d.width),10)+"px","padding-top":parseInt(d.origthumbTopPadding/(d.origWidth/d.width),10)+"px","padding-bottom":parseInt(d.origthumbBottomPadding/(d.origWidth/d.width),10)+"px"});c="px";-1!=t.css("font-size").lastIndexOf("em")&&(c="em");h="px";-1!=t.css("line-height").lastIndexOf("em")&&(h="em");t.css({"font-size":parseInt(d.origthumbTitleFont/ (d.origWidth/d.width),10)+c,"line-height":parseInt(d.origthumbTitleLineHeight/(d.origWidth/d.width),10)+h});c="px";-1!=p.css("font-size").lastIndexOf("em")&&(c="em");h="px";-1!=p.css("line-height").lastIndexOf("em")&&(h="em");p.css({"font-size":parseInt(d.origthumbRegFont/(d.origWidth/d.width),10)+c,"line-height":parseInt(d.origthumbRegLineHeight/(d.origWidth/d.width),10)+h});d.showThumbs&&e(".thumbsHolder_ThumbOFF",g).find("img:first").css({width:parseInt(d.origThumbImgW/(d.origWidth/d.width),10)+ "px",height:parseInt(d.origThumbImgH/(d.origWidth/d.width),10)+"px"});a.thumbMarginTop=Math.floor((o.height()-l.height()*d.numberOfThumbsPerScreen)/(d.numberOfThumbsPerScreen-1));thumb_i=0;b.children().each(function(){thumb_i++;theThumb=e(this);1>=thumb_i?theThumb.css("margin-top",Math.floor((o.height()-2*d.borderWidth/(d.origWidth/d.width)-(a.thumbMarginTop+theThumb.height())*(d.numberOfThumbsPerScreen-1)-theThumb.height())/2)+"px"):theThumb.css("margin-top",a.thumbMarginTop+"px")})}var F="fade slideFromLeft slideFromRight slideFromTop slideFromBottom topBottomDroppingStripes topBottomDroppingReverseStripes bottomTopDroppingStripes bottomTopDroppingReverseStripes asynchronousDroppingStripes leftRightFadingStripes leftRightFadingReverseStripes topBottomDiagonalBlocks topBottomDiagonalReverseBlocks randomBlocks".split(" "), z,A,o=100,L=50,D=25,s=navigator.userAgent.toLowerCase();e.fn.allinone_bannerWithPlaylist=function(a){a=e.extend({},e.fn.allinone_bannerWithPlaylist.defaults,a);return this.each(function(){var d=e(this);responsiveWidth=d.parent().width();responsiveHeight=d.parent().height();a.responsiveRelativeToBrowser&&(responsiveWidth=e(window).width(),responsiveHeight=e(window).height());a.origWidth=a.width;a.width100Proc&&(a.width=responsiveWidth);a.origHeight=a.height;a.height100Proc&&(a.height=responsiveHeight); if(a.responsive&&(a.origWidth!=responsiveWidth||a.width100Proc))a.width=a.origWidth>responsiveWidth||a.width100Proc?responsiveWidth:a.origWidth,a.height100Proc||(a.height=a.width/(a.origWidth/a.origHeight));a.width=parseInt(a.width,10);a.height=parseInt(a.height,10);d.css("display","block");var c=e("<div></div>").addClass("allinone_bannerWithPlaylistBorder"),g=e("<div></div>").addClass("allinone_bannerWithPlaylist").addClass(a.skin),h=e('<div class="bannerControls"> <div class="leftNav"></div> <div class="rightNav"></div> <div class="thumbsHolderWrapper"><div class="thumbsHolderVisibleWrapper"><div class="thumbsHolder"></div></div></div> <div class="slider-vertical"></div> </div> <canvas class="mycanvas"></canvas>'); d.wrap(g);d.after(h);a.showAllControllers||h.css("display","none");var b=d.parent(".allinone_bannerWithPlaylist"),h=e(".bannerControls",b);b.wrap(c);var l=b.parent(".allinone_bannerWithPlaylistBorder"),o=e(".leftNav",b),w=e(".rightNav",b);o.css("display","none");w.css("display","none");a.showNavArrows&&a.showOnInitNavArrows&&(o.css("display","block"),w.css("display","block"));var r=e(".thumbsHolderWrapper",b),t=e(".thumbsHolderVisibleWrapper",b),p=e(".thumbsHolder",b),m=e(".slider-vertical",b),x, v,n,k=0,f={current_img_no:0,currentImg:0,current_imgInside:"",windowWidth:0,carouselStep:0,thumbMarginTop:0,bottomNavClicked:!1,effectIsRunning:!1,mouseOverBanner:!1,timeoutID:"",intervalID:"",arcInitialTime:(new Date).getTime(),timeElapsed:0,windowWidth:0,canvas:"",ctx:"",bannerRatio:a.origWidth/a.origHeight};f.canvas=e(".mycanvas",b)[0];f.canvas.width=2*a.circleRadius+4*a.circleLineWidth;f.canvas.height=2*a.circleRadius+4*a.circleLineWidth;a.showCircleTimer&&(e.browser.msie&&9>parseInt(e.browser.version, 10)&&(f.canvas=G_vmlCanvasManager.initElement(f.canvas),!a.showCircleTimerIE8IE7&&a.showCircleTimer&&(a.showCircleTimer=!1)),f.ctx=f.canvas.getContext("2d"));l.width(a.width);l.height(a.height);l.css("background",a.borderColor);b.width(a.width-3*a.borderWidth/(a.origWidth/a.width)-a.playlistWidth/(a.origWidth/a.width));b.height(a.height-2*a.borderWidth/(a.origWidth/a.width));b.css({left:a.borderWidth/(a.origWidth/a.width)+"px",top:a.borderWidth/(a.origWidth/a.width)+"px"});h.width("100%");h.height("100%"); t.width(a.playlistWidth/(a.origWidth/a.width));t.height(b.height());r.width(a.playlistWidth/(a.origWidth/a.width));r.height(b.height());r.css({top:0,right:-1*(a.borderWidth/(a.origWidth/a.width)+a.playlistWidth/(a.origWidth/a.width))+"px"});p.width(a.playlistWidth/(a.origWidth/a.width));p.css("top",a.borderWidth/(a.origWidth/a.width)+"px");var u=d.find("ul:first").children(),q,z="",c=0;u.each(function(){f.currentImg=e(this);if(!f.currentImg.is("li"))f.currentImg=f.currentImg.find("li:first");if(f.currentImg.is("li")){f.currentImg.css("display", "none");k++;var d=e(u[k-1]).attr("data-bottom-thumb");z="";a.showThumbs&&(z='<img src="'+d+'">');q=e('<div class="thumbsHolder_ThumbOFF" rel="'+(k-1)+'"><div class="padding">'+z+'<span class="title">'+f.currentImg.attr("data-title")+'</span><br><span class="reg">'+f.currentImg.attr("data-desc")+"</span></div></div>");p.append(q);if(a.origThumbW==0){if(a.numberOfThumbsPerScreen==0)a.numberOfThumbsPerScreen=Math.floor(a.origHeight/q.height());a.origThumbW=q.width();a.origThumbH=q.height();x=e(".thumbsHolder_ThumbOFF .padding", b);a.origthumbLeftPadding=x.css("padding-left").substr(0,x.css("padding-left").lastIndexOf("px"));a.origthumbRightPadding=x.css("padding-right").substr(0,x.css("padding-left").lastIndexOf("px"));a.origthumbTopPadding=x.css("padding-top").substr(0,x.css("padding-left").lastIndexOf("px"));a.origthumbBottomPadding=x.css("padding-bottom").substr(0,x.css("padding-left").lastIndexOf("px"));f.thumbMarginTop=Math.floor((r.height()-q.height()*a.numberOfThumbsPerScreen)/(a.numberOfThumbsPerScreen-1));v=e(".thumbsHolder_ThumbOFF .title", b);n=e(".thumbsHolder_ThumbOFF .reg",b);if(v.css("font-size").lastIndexOf("px")!=-1)a.origthumbTitleFont=v.css("font-size").substr(0,v.css("font-size").lastIndexOf("px"));else if(v.css("font-size").lastIndexOf("em")!=-1)a.origthumbTitleFont=v.css("font-size").substr(0,v.css("font-size").lastIndexOf("em"));if(v.css("line-height").lastIndexOf("px")!=-1)a.origthumbTitleLineHeight=v.css("line-height").substr(0,v.css("line-height").lastIndexOf("px"));else if(v.css("line-height").lastIndexOf("em")!=-1)a.origthumbTitleLineHeight= v.css("line-height").substr(0,v.css("line-height").lastIndexOf("em"));if(n.css("font-size").lastIndexOf("px")!=-1)a.origthumbRegFont=n.css("font-size").substr(0,n.css("font-size").lastIndexOf("px"));else if(n.css("font-size").lastIndexOf("em")!=-1)a.origthumbRegFont=n.css("font-size").substr(0,n.css("font-size").lastIndexOf("em"));if(n.css("line-height").lastIndexOf("px")!=-1)a.origthumbRegLineHeight=n.css("line-height").substr(0,n.css("line-height").lastIndexOf("px"));else if(n.css("line-height").lastIndexOf("em")!= -1)a.origthumbRegLineHeight=n.css("line-height").substr(0,n.css("line-height").lastIndexOf("em"))}p.css("height",p.height()+f.thumbMarginTop+q.height()+"px");k<=1?q.css("margin-top",Math.floor((r.height()-2*a.borderWidth/(a.origWidth/a.width)-(f.thumbMarginTop+q.height())*(a.numberOfThumbsPerScreen-1)-q.height())/2)+"px"):q.css("margin-top",f.thumbMarginTop+"px")}});x=e(".thumbsHolder_ThumbOFF .padding",b);v=e(".thumbsHolder_ThumbOFF .title",b);n=e(".thumbsHolder_ThumbOFF .reg",b);var y=e(".thumbsHolder_ThumbOFF", b);K(f,a,k,b,y,p,q,t,r,x,v,n);k>a.numberOfThumbsPerScreen&&(m.slider({orientation:"vertical",range:"min",min:1,max:100,step:1,value:100,slide:function(b,d){E(d.value,q,k,p,a,f,m)}}),0>=a.borderWidth&&(c=m.width()/2),m.height(r.height()-25),m.css({display:"block",left:Math.floor(a.width-2*a.borderWidth/(a.origWidth/a.width)+(a.borderWidth/(a.origWidth/a.width)-m.width())/2)-c+"px"}));f.current_img_no=a.firstImg;a.firstImg>k&&(f.current_img_no=k);0>a.firstImg&&(f.current_img_no=0);a.randomizeImages&& (f.current_img_no=Math.floor(Math.random()*k));f.current_img_no>=a.numberOfThumbsPerScreen&&E(0,q,k,p,a,f,m);f.currentImg=e(u[f.current_img_no]);f.current_imgInside=f.currentImg.find("img:first");-1!=s.indexOf("ipad")||-1!=s.indexOf("iphone")||-1!=s.indexOf("ipod")||-1!=s.indexOf("webos")||e.browser.msie&&7>=e.browser.version?b.append('<img id="curBgImgIos" src="'+f.current_imgInside.attr("src")+'" width="'+b.width()+'" height="'+b.height()+'">'):(b.css("background",'url("'+f.current_imgInside.attr("src")+ '") no-repeat'),a.responsive&&(!e.browser.msie||e.browser.msie&&9<=e.browser.version?b.css({"-webkit-background-size":b.width()+"px "+b.height()+"px","-moz-background-size":b.width()+"px "+b.height()+"px","-o-background-size":b.width()+"px "+b.height()+"px","-ms-background-size":b.width()+"px "+b.height()+"px","background-size":b.width()+"px "+b.height()+"px"}):8==e.browser.version&&b.css({filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+f.current_imgInside.attr("src")+"',sizingMethod='scale')"}))); a.enableTouchScreen&&(c=Math.floor(1E5*Math.random()),b.wrap('<div id="bannerWithPlaylistParent_'+c+'" style="position:relative;" />'),e("#bannerWithPlaylistParent_"+c).width(b.width()),e("#bannerWithPlaylistParent_"+c).height(a.height-2*a.borderWidth/(a.origWidth/a.width)+1),e("#bannerWithPlaylistParent_"+c).css({left:a.borderWidth/(a.origWidth/a.width)+"px",top:a.borderWidth/(a.origWidth/a.width)+"px"}),b.css({cursor:"url("+a.absUrl+"skins/hand.cur),url("+a.absUrl+"skins/hand.cur),move",left:"0px", top:"0px",position:"absolute"}),b.draggable({axis:"y",containment:"parent",start:function(){origTop=e(this).css("top")},stop:function(){if(!f.effectIsRunning){finalTop=e(this).css("top");direction=1;origTop>=finalTop&&(direction=-1);C(direction,f,a,k,y,b,q,p,m,u)}e(this).css("top","0px")}}));H(f,a,d,h);b.bind("effectComplete",function(){f.effectIsRunning=false;if(s.indexOf("ipad")!=-1||s.indexOf("iphone")!=-1||s.indexOf("ipod")!=-1||s.indexOf("webos")!=-1||e.browser.msie&&e.browser.version<=7){e("#curBgImgIos", b).attr("src",f.current_imgInside.attr("src"));e("#curBgImgIos",b).width(b.width());e("#curBgImgIos",b).height(b.height())}else{b.css("background",'url("'+f.current_imgInside.attr("src")+'") no-repeat');a.responsive&&(!e.browser.msie||e.browser.msie&&e.browser.version>=9?b.css({"-webkit-background-size":b.width()+"px "+b.height()+"px","-moz-background-size":b.width()+"px "+b.height()+"px","-o-background-size":b.width()+"px "+b.height()+"px","-ms-background-size":b.width()+"px "+b.height()+"px","background-size":b.width()+ "px "+b.height()+"px"}):e.browser.version==8&&b.css({filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+f.current_imgInside.attr("src")+"',sizingMethod='scale')"}))}f.arcInitialTime=(new Date).getTime();f.timeElapsed=0;if(a.showCircleTimer){clearInterval(f.intervalID);f.ctx.clearRect(0,0,f.canvas.width,f.canvas.height);f.ctx.beginPath();f.ctx.globalAlpha=a.behindCircleAlpha/100;f.ctx.arc(a.circleRadius+2*a.circleLineWidth,a.circleRadius+2*a.circleLineWidth,a.circleRadius,0,2*Math.PI, false);f.ctx.lineWidth=a.circleLineWidth+2;f.ctx.strokeStyle=a.behindCircleColor;f.ctx.stroke();f.ctx.beginPath();f.ctx.globalAlpha=a.circleAlpha/100;f.ctx.arc(a.circleRadius+2*a.circleLineWidth,a.circleRadius+2*a.circleLineWidth,a.circleRadius,0,0,false);f.ctx.lineWidth=a.circleLineWidth;f.ctx.strokeStyle=a.circleColor;f.ctx.stroke();f.intervalID=setInterval(function(){I(f,a)},125)}H(f,a,d,h);if(a.autoPlay>0&&k>1&&!f.mouseOverBanner){clearTimeout(f.timeoutID);f.timeoutID=setTimeout(function(){C(1, f,a,k,y,b,q,p,m,u)},a.autoPlay*1E3)}});b.mouseenter(function(){f.mouseOverBanner=true;clearTimeout(f.timeoutID);nowx=(new Date).getTime();f.timeElapsed=f.timeElapsed+(nowx-f.arcInitialTime);if(a.autoHideNavArrows&&a.showNavArrows){o.css("display","block");w.css("display","block")}});b.mouseleave(function(){f.mouseOverBanner=false;nowx=(new Date).getTime();if(a.autoHideNavArrows&&a.showNavArrows){o.css("display","none");w.css("display","none")}if(a.autoPlay>0&&k>1){clearTimeout(f.timeoutID);f.arcInitialTime= (new Date).getTime();var d=parseInt(a.autoPlay*1E3-(f.timeElapsed+nowx-f.arcInitialTime),10);f.timeoutID=setTimeout(function(){C(1,f,a,k,y,b,q,p,m,u)},d)}});b.click(function(){if(e(u[f.current_img_no]).attr("data-link")!=void 0&&e(u[f.current_img_no]).attr("data-link")!=""&&!f.effectIsRunning){var b=a.target;e(u[f.current_img_no]).attr("data-target")!=void 0&&e(u[f.current_img_no]).attr("data-target")!=""&&(b=e(u[f.current_img_no]).attr("data-target"));b=="_blank"?window.open(e(u[f.current_img_no]).attr("data-link")): window.location=e(u[f.current_img_no]).attr("data-link")}});o.click(function(){if(!f.effectIsRunning){clearTimeout(f.timeoutID);C(-1,f,a,k,y,b,q,p,m,u)}});w.click(function(){if(!f.effectIsRunning){clearTimeout(f.timeoutID);C(1,f,a,k,y,b,q,p,m,u)}});y.click(function(){if(!f.effectIsRunning){var d=e(this).attr("rel");e(y[f.current_img_no]).removeClass("thumbsHolder_ThumbON");f.bottomNavClicked=true;f.current_img_no=d-1;C(1,f,a,k,y,b,q,p,m,u)}});y.mouseenter(function(){var a=e(this);a.attr("rel");a.addClass("thumbsHolder_ThumbON")}); y.mouseleave(function(){var a=e(this),b=a.attr("rel");f.current_img_no!=b&&a.removeClass("thumbsHolder_ThumbON")});t.mousewheel(function(b,d){b.preventDefault();var e=m.slider("value");if(parseInt(e,10)>1&&parseInt(d,10)==-1||parseInt(e,10)<100&&parseInt(d,10)==1){e=e+d;m.slider("value",e);E(e,q,k,p,a,f,m)}});var A=!1;e(window).resize(function(){doResizeNow=true;if(navigator.userAgent.indexOf("Android")!=-1){if(a.windowOrientationScreenSize0==0&&window.orientation==0)a.windowOrientationScreenSize0= e(window).width();if(a.windowOrientationScreenSize90==0&&window.orientation==90)a.windowOrientationScreenSize90=e(window).height();if(a.windowOrientationScreenSize_90==0&&window.orientation==-90)a.windowOrientationScreenSize_90=e(window).height();a.windowOrientationScreenSize0&&(window.orientation==0&&e(window).width()>a.windowOrientationScreenSize0)&&(doResizeNow=false);a.windowOrientationScreenSize90&&(window.orientation==90&&e(window).height()>a.windowOrientationScreenSize90)&&(doResizeNow=false); a.windowOrientationScreenSize_90&&(window.orientation==-90&&e(window).height()>a.windowOrientationScreenSize_90)&&(doResizeNow=false);if(f.windowWidth==0){doResizeNow=false;f.windowWidth=e(window).width()}}e.browser.msie&&(parseInt(e.browser.version,10)==9&&f.windowWidth==0)&&(doResizeNow=false);if(f.windowWidth==e(window).width()){doResizeNow=false;if(a.windowCurOrientation!=window.orientation&&navigator.userAgent.indexOf("Android")!=-1){a.windowCurOrientation=window.orientation;doResizeNow=true}}else f.windowWidth= e(window).width();if(a.responsive&&doResizeNow){A!==false&&clearTimeout(A);A=setTimeout(function(){var c=a,g=k,h=q,o=x,w=v,z=n,A=e("body").css("overflow"),B=0;e("body").css("overflow","hidden");if(c.enableTouchScreen){responsiveWidth=d.parent().parent().parent().parent().width();responsiveHeight=d.parent().parent().parent().parent().height()}else{responsiveWidth=d.parent().parent().parent().width();responsiveHeight=d.parent().parent().parent().height()}if(c.responsiveRelativeToBrowser){responsiveWidth= e(window).width();responsiveHeight=e(window).height()}if(c.width100Proc)c.width=responsiveWidth;if(c.height100Proc)c.height=responsiveHeight;if(c.origWidth!=responsiveWidth||c.width100Proc){if(c.origWidth>responsiveWidth||c.width100Proc)c.width=responsiveWidth;else if(!c.width100Proc)c.width=c.origWidth;if(!c.height100Proc)c.height=c.width/f.bannerRatio;c.width=parseInt(c.width,10);c.height=parseInt(c.height,10);l.width(c.width);l.height(c.height);b.width(parseInt(c.width-3*c.borderWidth/(c.origWidth/ c.width)-c.playlistWidth/(c.origWidth/c.width),10));b.height(parseInt(c.height-2*c.borderWidth/(c.origWidth/c.width),10));b.css({left:c.borderWidth/(c.origWidth/c.width)+"px",top:c.borderWidth/(c.origWidth/c.width)+"px"});t.width(c.playlistWidth/(c.origWidth/c.width));t.height(b.height());r.width(c.playlistWidth/(c.origWidth/c.width));r.height(b.height());r.css({top:0,right:-1*(c.borderWidth/(c.origWidth/c.width)+c.playlistWidth/(c.origWidth/c.width))+"px"});p.width(c.playlistWidth/(c.origWidth/c.width)); p.css("top",c.borderWidth/(c.origWidth/c.width)+"px");if(g>c.numberOfThumbsPerScreen){c.borderWidth<=0&&(B=m.width()/2);m.height(r.height()-25);m.css({display:"block",left:Math.floor(c.width-2*c.borderWidth/(c.origWidth/c.width)+(c.borderWidth/(c.origWidth/c.width)-m.width())/2)-B+"px"})}if(s.indexOf("ipad")!=-1||s.indexOf("iphone")!=-1||s.indexOf("ipod")!=-1||s.indexOf("webos")!=-1||e.browser.msie&&e.browser.version<=7){e("#curBgImgIos",b).attr("src",f.current_imgInside.attr("src"));e("#curBgImgIos", b).width(b.width());e("#curBgImgIos",b).height(b.height())}else!e.browser.msie||e.browser.msie&&e.browser.version>=9?b.css({"-webkit-background-size":b.width()+"px "+b.height()+"px","-moz-background-size":b.width()+"px "+b.height()+"px","-o-background-size":b.width()+"px "+b.height()+"px","-ms-background-size":b.width()+"px "+b.height()+"px","background-size":b.width()+"px "+b.height()+"px"}):e.browser.version==8&&b.css({filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+f.current_imgInside.attr("src")+ "',sizingMethod='scale')"});if(c.enableTouchScreen){b.parent().width(b.width());b.parent().height(c.height-2*c.borderWidth/(c.origWidth/c.width)+1);b.parent().css({left:c.borderWidth/(c.origWidth/c.width)+"px",top:c.borderWidth/(c.origWidth/c.width)+"px"});b.css({left:"0px",top:"0px"})}K(f,c,g,b,y,p,h,t,r,o,w,z);clearTimeout(f.timeoutID);C(1,f,c,g,y,b,h,p,m,u)}e("body").css("overflow",A)},300)}});e(y[f.current_img_no]).addClass("thumbsHolder_ThumbON");0<a.autoPlay&&1<k&&(a.showCircleTimer&&(f.intervalID= setInterval(function(){I(f,a)},125)),f.timeoutID=setTimeout(function(){C(1,f,a,k,y,b,q,p,m,u)},1E3*a.autoPlay))})};e.fn.myReverse=[].reverse;e.fn.allinone_bannerWithPlaylist.defaults={skin:"elegant",width:960,height:384,width100Proc:!1,height100Proc:!1,randomizeImages:!1,firstImg:0,numberOfStripes:20,numberOfRows:5,numberOfColumns:10,defaultEffect:"random",effectDuration:0.5,autoPlay:4,loop:!0,target:"_blank",showAllControllers:!0,showNavArrows:!0,showOnInitNavArrows:!0,autoHideNavArrows:!0,showThumbs:!0, borderWidth:15,borderColor:"#e9e9e9",playlistWidth:300,enableTouchScreen:!0,absUrl:"",showCircleTimer:!0,showCircleTimerIE8IE7:!1,circleRadius:10,circleLineWidth:4,circleColor:"#FF0000",circleAlpha:100,behindCircleColor:"#000000",behindCircleAlpha:50,responsive:!1,responsiveRelativeToBrowser:!0,numberOfThumbsPerScreen:0,origWidth:0,origHeight:0,origThumbW:0,origThumbH:0,origThumbImgW:214,origThumbImgH:128,origthumbLeftPadding:0,origthumbRightPadding:0,origthumbTopPadding:0,origthumbBottomPadding:0, origthumbTitleFont:0,origthumbRegFont:0,origthumbTitleLineHeight:0,origthumbRegLineHeight:0,origthumbsHolder_MarginTop:0,windowOrientationScreenSize0:0,windowOrientationScreenSize90:0,windowOrientationScreenSize_90:0,windowCurOrientation:0}})(jQuery);